<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>QUEEN EMILY MD V1 | Pair Session</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <style>
    :root {
      --primary: #0a1f44;
      --secondary: #1c3b70;
      --glow: #00f7ff;
      --text: #e0e6f1;
      --dark: #0d1b2a;
    }

    * {margin:0; padding:0; box-sizing:border-box;}

    body {
      font-family: "Orbitron", sans-serif;
      background: radial-gradient(circle at top left, #0a1f44, #0d1b2a, #1c3b70);
      color: var(--text);
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh; padding: 20px;
    }

    .wrapper {
      display: grid;
      grid-template-columns: 1fr 2fr;
      background: var(--dark);
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 0 25px rgba(0,0,0,0.6), inset 0 0 20px rgba(0,247,255,0.1);
      max-width: 900px; width: 100%;
      animation: popIn 1s ease;
    }

    @keyframes popIn {
      from {transform:scale(0.9); opacity:0;}
      to {transform:scale(1); opacity:1;}
    }

    /* LEFT PANEL */
    .left-panel {
      background: linear-gradient(135deg, #0a1f44, #1c3b70);
      padding: 40px 25px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-right: 2px solid rgba(255,255,255,0.1);
    }

    .logo {
      width: 90px; height: 90px;
      border-radius: 50%;
      display: flex; align-items:center; justify-content:center;
      background: var(--secondary);
      font-size: 38px; color: #fff;
      margin-bottom: 18px;
      box-shadow: 0 0 20px var(--glow);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {box-shadow: 0 0 8px var(--glow);}
      50% {box-shadow: 0 0 25px var(--glow);}
      100% {box-shadow: 0 0 8px var(--glow);}
    }

    .title { font-size: 24px; font-weight: 700; margin-bottom: 6px; text-align: center; color: #fff;}
    .subtitle { font-size: 14px; color: #9ebbe9; margin-bottom: 30px; text-align: center; }

    .social-icons {
      display: flex; gap: 12px; flex-wrap: wrap; justify-content: center;
    }
    .social-icons a {
      width: 40px; height: 40px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      color: #fff; font-size: 16px; transition:0.3s;
    }
    .social-icons a.youtube {background:#FF0000;}
    .social-icons a.telegram {background:#0088cc;}
    .social-icons a.whatsapp {background:#25D366;}
    .social-icons a.github {background:#333;}
    .social-icons a:hover {transform: scale(1.2) rotate(6deg); box-shadow:0 0 10px var(--glow);}

    /* RIGHT PANEL */
    .right-panel {
      padding: 30px;
      display: flex; flex-direction: column;
      justify-content: center;
    }

    .toggle-container {
      display: flex; margin-bottom: 20px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px; overflow: hidden;
    }

    .toggle-option {
      flex: 1; padding: 12px;
      text-align: center; cursor: pointer;
      background: transparent; color: #ccc;
      font-weight: 600; font-size: 14px;
      transition: 0.3s;
    }
    .toggle-option.active {
      background: var(--secondary);
      color: #fff;
      box-shadow: inset 0 0 12px var(--glow);
    }
    .toggle-option:hover {background: rgba(255,255,255,0.08);}

    .input-group { margin-bottom: 18px; }
    .input-label { font-size: 12px; color:#9ebbe9; margin-bottom:6px; display:block; }
    .input-field {
      width: 100%; padding: 12px;
      border-radius: 8px; border:1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
      color: #fff; font-size:14px;
    }
    .input-field:focus {outline:none; border-color: var(--glow); box-shadow:0 0 8px var(--glow);}

    .generate-btn, .copy-btn {
      padding: 12px; border: none;
      border-radius: 8px; font-weight: 700;
      cursor: pointer; margin-bottom: 14px;
      background: linear-gradient(90deg, var(--secondary), #0e2a55);
      color: #fff; transition:0.3s;
    }
    .generate-btn:hover, .copy-btn:hover { transform:translateY(-2px); box-shadow:0 0 12px var(--glow); }

    .code-display, .qr-display {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      padding: 14px; border-radius: 10px;
      text-align: center; font-weight: 600;
      margin-bottom: 14px;
    }
    .code-display { min-height: 40px; }
    .qr-display { display:none; }
    .qr-image { max-width:200px; border-radius: 10px; box-shadow:0 0 10px var(--glow); margin-bottom:10px; }

    .loading {display:none; text-align:center; margin:12px;}
    .loading i { animation:spin 1s linear infinite; }
    @keyframes spin { to {transform:rotate(360deg);} }

    .success-message {color:#4bb543;}
    .error-message {color:#ff4d4d;}

    .footer { font-size: 12px; text-align: center; color:#9ebbe9; margin-top:10px; }
    
    @media(max-width:768px){
      .wrapper{grid-template-columns:1fr;}
      .left-panel{border-right:none; border-bottom:2px solid rgba(255,255,255,0.1);}
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="left-panel">
      <div class="logo"><i class="fas fa-robot"></i></div>
      <h1 class="title">QUEEN EMILY MD V1</h1>
      <p class="subtitle">Pair your WhatsApp in seconds</p>
      <div class="social-icons">
        <a href="https://youtube.com/@cotech-1?si=XGEDdFrQOm3QaZpq" target="_blank" class="youtube"><i class="fab fa-youtube"></i></a>
        <a href="https://t.me/+RyHOondjwZdkZDY0" target="_blank" class="telegram"><i class="fab fa-telegram-plane"></i></a>
        <a href="https://whatsapp.com/channel/0029Vb77pP4A89Mje20udJ32" target="_blank" class="whatsapp"><i class="fab fa-whatsapp"></i></a>
        <a href="https://github.com/favourodoemenechidozie/QUEEN-EMILY-MD" target="_blank" class="github"><i class="fab fa-github"></i></a>
      </div>
    </div>

    <div class="right-panel">
      <div class="toggle-container">
        <div class="toggle-option active" data-mode="pair"><i class="fas fa-key"></i> Pair Code</div>
        <div class="toggle-option" data-mode="qr"><i class="fas fa-qrcode"></i> QR Code</div>
      </div>

      <div class="input-group" id="inputGroup">
        <label class="input-label">WhatsApp number with country code</label>
        <input type="text" id="mobileNumber" class="input-field" placeholder="+2349129279369">
      </div>

      <button class="generate-btn" id="submit"><i class="fas fa-key"></i> Generate Pair Code</button>
      <div class="loading" id="loading"><i class="fas fa-spinner"></i></div>
      <div class="code-display" id="codeDisplay">Your pair code will appear here</div>

      <div class="qr-display" id="qrDisplay">
        <img id="qrImage" class="qr-image" src="" alt="QR Code">
        <div class="qr-instructions" id="qrInstructions">Scan with your WhatsApp app</div>
      </div>

      <button class="copy-btn" id="copy" onclick="copyCode()"><i class="fas fa-copy"></i> Copy Code</button>
      <div class="footer">Â© 2025 C.O TECH | QUEEN EMILY MD V1</div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
  <script>
    let currentMode = 'pair';
    document.querySelectorAll('.toggle-option').forEach(option => {
      option.addEventListener('click', function() {
        const mode = this.dataset.mode;
        if (mode === currentMode) return;
        document.querySelectorAll('.toggle-option').forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');
        currentMode = mode;
        const submitBtn = document.getElementById('submit');
        const inputGroup = document.getElementById('inputGroup');
        if (mode === 'pair') { submitBtn.style.display="block"; inputGroup.style.display="block"; }
        else { submitBtn.style.display="none"; inputGroup.style.display="none"; generateQRCode(); }
        document.getElementById('codeDisplay').innerHTML = 'Your pair code will appear here';
        document.getElementById('qrDisplay').style.display = 'none';
      });
    });

    async function generateQRCode() {
      const codeDisplay = document.getElementById("codeDisplay");
      const qrDisplay = document.getElementById("qrDisplay");
      const loading = document.getElementById("loading");
      loading.style.display="block"; codeDisplay.innerHTML=""; qrDisplay.style.display="none";
      try {
        const res = await axios('/qr');
        if(res.data.qr){ document.getElementById('qrImage').src=res.data.qr; document.getElementById('qrInstructions').innerHTML=res.data.instructions.join('<br>'); qrDisplay.style.display="block";}
        else { codeDisplay.innerHTML='<div class="error-message">Failed to generate QR</div>'; }
      } catch { codeDisplay.innerHTML='<div class="error-message">Error. Try again.</div>'; }
      finally { loading.style.display="none"; }
    }

    document.getElementById("submit").addEventListener("click", async (e)=>{
      e.preventDefault();
      const mobile = document.getElementById("mobileNumber").value.trim();
      const codeDisplay = document.getElementById("codeDisplay");
      const qrDisplay = document.getElementById("qrDisplay");
      const loading = document.getElementById("loading");
      if(!mobile){ codeDisplay.innerHTML='<div class="error-message">Enter WhatsApp number</div>'; return;}
      loading.style.display="block"; codeDisplay.innerHTML=""; qrDisplay.style.display="none";
      try{
        const res = await axios(`/pair?number=${mobile.replace(/[^0-9]/g,"")}`);
        const code = res.data.code||"Service Unavailable";
        codeDisplay.innerHTML = code==="Service Unavailable" ? '<div class="error-message">Service Unavailable</div>' : `<div class="success-message">CODE: ${code}</div>`;
      }catch{ codeDisplay.innerHTML='<div class="error-message">Error generating code</div>'; }
      finally{ loading.style.display="none"; }
    });

    function copyCode(){
      const text=document.getElementById("codeDisplay").innerText.replace('CODE: ','');
      navigator.clipboard.writeText(text).then(()=>{
        const btn=document.getElementById("copy"); const old=btn.innerHTML;
        btn.innerHTML='<i class="fas fa-check"></i> Copied!'; setTimeout(()=>btn.innerHTML=old,2000);
      });
    }
  </script>
</body>
</html>
